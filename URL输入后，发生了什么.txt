当我们输入一些网址的时候，跳出来的网页到底是怎么来的呢？

那么，我们首先要来理解下什么是URL（也就是网址,如www.baidu.com）

什么是URL？

URL是Uniform Resource Location的缩写，译为“统一资源定位符”。它包括下面几个部分：

1.协议部分：该URL的协议部分为"http:"，这代表网页使用的是HTTP协议。在Internet中可以使用多种协议，如HTTP，FTP等等本例中使用的是HTTP协议。在"HTTP"后面的"//"为分隔符。

2.域名部分：一个URL中，也可以使用IP地址作为域名使用，例如"www.baidu.com","127.0.0.1"

3.端口部分：跟在域名后面的是端口，域名和端口之间使用":"作为分隔符。端口不是一个URL必须的部分，如果省略端口部分，将采用默认端口。

4.虚拟目录部分、文件名部分、锚部分和参数部分为非必要部分。

让我们简单地用公式来展示一下就是：

资源类型+服务器地址(域名/ip):端口号/path路径(服务器资源的路径)



第一步：DNS解析

首先在浏览器输入了一个URL地址，但URL中服务器地址是一个域名而不是一个指定的IP地址，路由器并不知道你想要查找的地址，那么DNS域名解析系统会将该域名解析成ip，而IP地址是唯一的， 每一个ip地址对应网络上的一台计算机。

简单来说，就是你输入URL，这个域名必须要被解析成ip地址，才能够在服务器端找到相应的文件，这就好比一个中国人，一个美国人，他们语言不通，必须得找一个翻译来沟通一样。

那么为什么不直接输入IP地址呢？那是因为IP地址是一串数字，太难记了，而且不符合语义化，baidu，Google这些单词多容易记住啊！

域名解析过程如下：

1.浏览器缓存 C 浏览器会缓存DNS记录一段时间

2.系统缓存 - 从 Hosts 文件查找是否有该域名和对应 IP。

3.路由器缓存 C 一般路由器也会缓存域名信息。

4.ISP DNS 缓存 C 比如到电信的 DNS 上查找缓存。

5.如果都没有找到，则向根域名服务器查找域名对应 IP，根域名服务器把请求转发到下一级，知道找到 IP

DNS劫持：DNS劫持又称域名劫持，是指在劫持的网络范围内拦截域名解析的请求，分析请求的域名，把审查范围以外的请求放行，否则返回假的IP地址或者什么都不做使请求失去响应，其效果就是对特定的网络不能反应或访问的是假网址。



第二步：请求处理

解析好了之后，浏览器会向服务器发送请求，我要怎么怎么样，要什么什么数据，比如下图，注意白圈圈里面的就是服务器。

服务器是安装系统的机器，常见的系统为Linux，Windows serve 2012，系统里安装的处理请求的应用叫web server.常见的web服务器有nginx,Apache、IIS.

下图白色服务器部分，有三个网站，jirengu,jscode,works，这样通过nginx这个web服务器来管理，nginx作为一个管理三个网站的人，将它们分配给外部请求。




第三步：网站处理流程




即MVC模式，这个还需要加深理解。

第四步：浏览器处理

HTML字符串被浏览器接受后被一句句读取解析

解析到link 标签后重新发送请求获取css

解析到 script标签后发送请求获取 js，并执行代码

解析到img 标签后发送请求获取图片资源。



第五步：网页渲染

绘制网页

浏览器根据 HTML 和 CSS 计算得到渲染树，绘制到屏幕上js 会被执行